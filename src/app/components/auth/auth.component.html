<div class="auth-container">
  <mat-card class="auth-card">
    <mat-tab-group>
      <!-- Login Tab -->
      <mat-tab label="Login">
        <form (ngSubmit)="login()" style="margin-top: 1rem;">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput type="email" [(ngModel)]="loginEmail" name="loginEmail" required />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input matInput type="password" [(ngModel)]="loginPassword" name="loginPassword" required />
          </mat-form-field>

          <button mat-raised-button color="primary" class="full-width" type="submit">
            Login
          </button>
        </form>

        <!-- Google login area -->
        <div style="margin-top: 1rem; text-align: center;">
          <!-- 1) If GSI widget can be rendered, attempt to let it show (the library will render it) -->
          <div *ngIf="gsiAvailable; else fallback">
            <!-- Rendered widget (may or may not appear depending on Google policy / browser) -->
            <asl-google-signin-button
              type="standard"
              size="large"
              theme="outline"
              shape="rectangular">
            </asl-google-signin-button>
            <div style="margin-top: 6px; color: #666;">or sign in using Google</div>
          </div>

          <!-- 2) Fallback: programmatic sign-in button (works reliably) -->
          <ng-template #fallback>
            <button mat-stroked-button color="primary" (click)="signInWithGoogleProgrammatic()">
              Continue with Google
            </button>
            <div style="margin-top: 6px; color: #999;">Google widget not available â€” using fallback</div>
          </ng-template>
        </div>
      </mat-tab>

      <!-- Register Tab -->
      <mat-tab label="Register">
        <form (ngSubmit)="register()" style="margin-top: 1rem;">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Full Name</mat-label>
            <input matInput [(ngModel)]="regName" name="regName" required />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput type="email" [(ngModel)]="regEmail" name="regEmail" required />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input matInput type="password" [(ngModel)]="regPassword" name="regPassword" required />
          </mat-form-field>

          <button mat-raised-button color="accent" class="full-width" type="submit">
            Register
          </button>
        </form>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
</div>
